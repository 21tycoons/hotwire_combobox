<%= tag.fieldset class: "hw-combobox", data: parent_data do %>
  <%= hidden_field_tag value_field_attrs.delete(:name),
        value_field_attrs.delete(:value), **value_field_attrs %>

  <%= tag.input **attrs %>

  <%= tag.ul id: listbox_id, hidden: "", role: :listbox,
        data: { "hw-combobox-target": "listbox" } do |ul| %>
    <% options.each do |option| %>
      <%= tag.li option.content, id: option.try(:id),
            role: :option, style: "cursor: pointer;",
            data: {
              "action": "click->hw-combobox#selectOption",
              "filterable-as": option.try(:filterable_as),
              "autocompletable-as": option.try(:autocompletable_as),
              "value": value_for_hw_listbox_option(option) } %>
    <% end %>
  <% end %>
<% end %>
